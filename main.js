const questions = [
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'What is HTML?',
        answers: ['HTML describes the structure of a webpage', 
            'HTML is the standard markup language mainly used to create web pages',
            'HTML consists of a set of elements that helps the browser how to view the content',
            'All of the mentioned'],
        correctAnswer: 'All of the mentioned'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
    {
        question: 'Who is the father of HTML?',
        answers: ['Rasmus Lerdorf',
            'Tim Berners-Lee',
            'Brendan Eich',
            'Sergey Brin'],
        correctAnswer: 'Tim Berners-Lee'
    },
    {
        question: 'HTML stands for __________',
        answers: ['HyperText Markup Language',
            'HyperText Machine Language',
            'HyperText Marking Language',
            'HighText Marking Language'],
        correctAnswer: 'HyperText Markup Language'
    },
];

const questionText = document.querySelector(".question_text");
const answerContainer = document.querySelector(".answers");
const questionNumber = document.querySelector(".question_number");
const feedback = document.querySelector(".feedback");
const userAnswers = []; 
let userScore = 0;

let currentQuestionIndex = 0;

function loadQuestion() {
    let currentQuestion = questions[currentQuestionIndex];
    
    questionNumber.textContent = `${currentQuestionIndex + 1}`;
    questionText.textContent = currentQuestion.question;
    feedback.textContent = "";

    answerContainer.innerHTML = "";

    // Loop through answers
    currentQuestion.answers.forEach(answer => {
        let label = document.createElement("label");
        label.style.display = "block";
        let input = document.createElement("input");
        input.type = "radio";
        input.name = "answer";
        input.value = answer;

        // Check if user already selected an answer
        if (userAnswers[currentQuestionIndex] === answer) {
            input.checked = true;
        }

        // Store user answer on change
        input.addEventListener("change", (e) => {
            userAnswers[currentQuestionIndex] = e.target.value;
            checkAnswer();
        });

        label.appendChild(input);
        label.appendChild(document.createTextNode(" " + answer));
        answerContainer.appendChild(label);
    });
}

function checkAnswer() {
    let selectedAnswer = document.querySelector("input[name='answer']:checked");

    if (!selectedAnswer) {
        feedback.textContent = "Please select an answer.";
        feedback.style.color = "red";
        return false;
    }

    let correctAnswer = questions[currentQuestionIndex].correctAnswer;

    if (selectedAnswer.value === correctAnswer) {
        feedback.textContent = "Correct!";
        feedback.style.color = "green";
        userScore++;
    } else {
        feedback.textContent = `Wrong! The correct answer is: ${correctAnswer}`;
        feedback.style.color = "red";
    }

    userAnswers[currentQuestionIndex] = selectedAnswer.value;
    return true;
}



// Event Listeners for buttons
document.addEventListener("click", (event) => {
    if (event.target.classList.contains("next")) {
        checkAnswer(); 

        if (currentQuestionIndex < questions.length - 1) {
            currentQuestionIndex++;
            setTimeout(loadQuestion, 1000);
        } else {
            setTimeout(() => {
                alert(`Quiz completed! Your final score is ${userScore}/${questions.length}`);
                window.location.reload();
            }, 1000);
        }
    }

    if (event.target.classList.contains("previous")) {
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            loadQuestion();

            // Restore previous answer selection
            document.querySelectorAll("input[name='answer']").forEach(input => {
                if (input.value === userAnswers[currentQuestionIndex]) {
                    input.checked = true;
                }
            });
        }
    }
});

document.querySelector(".quit").addEventListener("click", () => {
    if (confirm("Are you sure you want to quit the quiz?")) {
        document.querySelector(".quiz_container").style.display = "none";
        document.querySelector(".welcome").style.display = "block";
    }
});

document.querySelector(".proceed").addEventListener("click", function() {
    document.querySelector(".welcome").style.display = "none";
    document.querySelector(".quiz_rules").style.display = "block";
});

document.querySelector(".accept").addEventListener("click", function() {
    document.querySelector(".quiz_rules").style.display = "none";
    document.querySelector(".quiz_start").style.display = "block";
});

document.querySelector(".start").addEventListener("click", function() {
    document.querySelector(".quiz_start").style.display = "none";
    document.querySelector(".quiz_container").style.display = "block"; 
});



document.addEventListener("DOMContentLoaded", loadQuestion);


let storedTime = localStorage.getItem("quizTimer");
let totalTime = storedTime !== null ? parseInt(storedTime) : 30 * 60; 
let timer; 


function startGlobalTimer() {
    clearInterval(timer); 

    timer = setInterval(() => {
        if (totalTime <= 0) {
            clearInterval(timer);
            endQuiz();
            return;
        }

        let minutes = Math.floor(totalTime / 60);
        let seconds = totalTime % 60;

        // Check if element exists before updating
        let timeElement = document.querySelector(".time");
        if (timeElement) {
            timeElement.textContent = `${minutes}:${seconds < 10 ? "0" : ""}${seconds}`;
        }

        totalTime--; 

        // Save updated time in localStorage
        localStorage.setItem("quizTimer", totalTime);

    }, 1000);
}

function endQuiz() {
    alert("Time's up! Submitting quiz...");
    localStorage.removeItem("quizTimer"); 
}


// Ensure timer starts when the start quiz button is clicked
document.querySelector(".start").addEventListener("click", function() {
    loadQuestion(); 
    startGlobalTimer();
});

// Reset the timer when the user quits or navigates away
window.addEventListener("beforeunload", () => {
    localStorage.removeItem("quizTimer");
});
